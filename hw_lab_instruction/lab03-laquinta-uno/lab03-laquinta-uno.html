<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Tanzy Love, based on the course by Andrew McDavid" />


<title>Lab 03 - La Quinta is Spanish for next to Denny’s, Pt. 1</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<style type="text/css">
@charset "UTF-8";

html { font-size: 15px; }
body { width: 87.5%;
margin-left: auto;
margin-right: auto;
padding-left: 12.5%;
color: #111;
max-width: 1400px;
counter-reset: sidenote-counter; }
h1.title { font-weight: 400;
font-style: normal;
margin-top: 4rem;
margin-bottom: 1.5rem;
font-size: 3.2rem;
line-height: 1; }
h1 {
font-weight: 400;
margin-top: 2.1rem;
margin-bottom: 0;
font-size: 2.2rem;
line-height: 1; }
h2 {
font-weight: 400;
font-size: 1.7rem;
margin-top: 2rem;
margin-bottom: 0;
line-height: 1; }
h3.subtitle {
font-weight: 400;
margin-top: 1rem;
margin-bottom: 1rem;
font-size: 1.8rem;
display: block;
line-height: 1; }
h4.author, h4.date {
font-size: 1.4rem;
font-weight: 400;
margin: 1rem auto;
line-height: 1;
}
.danger { color: red; }
article { position: relative;
padding: 5rem 0rem; }
section { padding-top: 1rem;
padding-bottom: 1rem; }
p, ol, ul { font-size: 1.4rem; }
p { line-height: 2rem;
margin-top: 1.4rem;
margin-bottom: 1.4rem;
padding-right: 0;
vertical-align: baseline; }
blockquote { font-size: 1.4rem; }
blockquote p { width: 50%; }
blockquote footer { width: 50%;
font-size: 1.1rem;
text-align: right; }
ol, ul { width: 45%;
-webkit-padding-start: 5%;
-webkit-padding-end: 5%; }
li { padding: 0.5rem 0; }
table {
border-top: 2px solid #111;
border-bottom: 2px solid #111;
font-size: 1.1rem;
}
th {
border-bottom: 1px solid #111;
}
div.figure {
padding: 0;
border: 0;
font-size: 100%;
font: inherit;
vertical-align: baseline;
max-width: 55%;
-webkit-margin-start: 0;
-webkit-margin-end: 0;
margin: 0 0 3em 0;
}

a:link, a:visited { color: inherit; }
a:link { text-decoration: none;
background: -webkit-linear-gradient(#fffff8, #fffff8), -webkit-linear-gradient(#fffff8, #fffff8), -webkit-linear-gradient(#333, #333);
background: linear-gradient(#fffff8, #fffff8), linear-gradient(#fffff8, #fffff8), linear-gradient(#333, #333);
-webkit-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;
-moz-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;
background-size: 0.05em 1px, 0.05em 1px, 1px 1px;
background-repeat: no-repeat, no-repeat, repeat-x;
text-shadow: 0.03em 0 #fffff8, -0.03em 0 #fffff8, 0 0.03em #fffff8, 0 -0.03em #fffff8, 0.06em 0 #fffff8, -0.06em 0 #fffff8, 0.09em 0 #fffff8, -0.09em 0 #fffff8, 0.12em 0 #fffff8, -0.12em 0 #fffff8, 0.15em 0 #fffff8, -0.15em 0 #fffff8;
background-position: 0% 93%, 100% 93%, 0% 93%; }
@media screen and (-webkit-min-device-pixel-ratio: 0) { a:link { background-position-y: 87%, 87%, 87%; } }
a:link::selection { text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;
background: #b4d5fe; }
a:link::-moz-selection { text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;
background: #b4d5fe; }

img {max-width: 100%;}
.marginnote img { display: block; }
.sidenote, .marginnote { float: right;
clear: right;
margin-right: -60%;
width: 50%;
margin-top: 0;
margin-bottom: 1rem;
font-size: 1.1rem;
line-height: 1.3;
vertical-align: baseline;
position: relative; }
.sidenote-number {
position: relative;
vertical-align: baseline; }
.sidenote-number { font-size: 1rem;
top: -0.5rem;
left: 0.1rem; }
p, footer, table, hr { width: 55%; }
hr { margin-left: 0; }
table table, li p, li pre { width: auto; }
li p, li pre {margin-top: auto; }
div.fullwidth, table.fullwidth { max-width: 90%; }
div.fullwidth > * { width: auto; }
#TOC, h1.title { max-width: 90%; }
#TOC ol, #TOC ul { width: auto; }
div.fullwidth p.caption {
margin-right: 0;
max-width: 33%;
}
p.caption { text-align: left; }
@media screen and (max-width: 760px) { p, footer, ol, ul, table, hr { width: 90%; }
pre { width: 87.5%; }
ul { width: 85%; }
figure { max-width: 90%; }
div.fullwidth p.caption { max-width: none; }
blockquote p, blockquote footer { width: 90%; }}
.sans { font-family: "Gill Sans", "Gill Sans MT", Calibri, sans-serif;
letter-spacing: .03em; }
code { font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
font-size: 1.125rem;
line-height: 1.6; }
pre code { font-size: 1rem; }
p code { white-space: inherit; }
h1 code, h2 code, h3 code { font-size: 0.80em; }
.marginnote code, .sidenote code { font-size: 1rem; }
pre { width: 52.5%;
overflow-x: auto; }
.fullwidth { max-width: 90%;
clear:both; }
span.newthought { font-variant: small-caps;
font-size: 1.2em; }
input.margin-toggle { display: none; }
label.sidenote-number { display: inline; }
label.margin-toggle:not(.sidenote-number) { display: none; }
@media (max-width: 760px) { label.margin-toggle:not(.sidenote-number) { display: inline; }
.sidenote, .marginnote { display: none; }
.shownote,
.margin-toggle:checked + .sidenote,
.margin-toggle:checked + .marginnote {
display: block;
float: left;
left: 1rem;
clear: both;
width: 95%;
margin: 1rem 2.5%;
vertical-align: baseline;
position: relative;
}
label { cursor: pointer; }
div.figure { max-width: 90%; }
pre { width: 90%;
padding: 0; }
}
</style>
<style type="text/css">@import 'https://fonts.googleapis.com/css?family=Roboto+Condensed'body {
font-family: 'Roboto Condensed', Arial, Helvetica, sans-serif;
background-color: #fefefe;
color: #222;
}
.numeral, .sidenote-number { font-family: "Roboto Condensed"; }
</style>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">@import 'https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700'@import 'https://fonts.googleapis.com/css?family=Source+Code+Pro'@charset "UTF-8";html {font-size: 12px;}body {font-family: 'Source Sans Pro', sans-serif;font-weight: 300;background-color: #fefefe;color: #222;counter-reset: li;}h1.title {font-weight: 700;font-family: 'Source Sans Pro', sans-serif;color: #6CA0DC;}h1 {font-style: normal;font-family: 'Source Sans Pro', sans-serif;color: #6CA0DC;}h2 {font-style: normal;font-family: 'Source Sans Pro', sans-serif;font-weight: 400;color: #6CA0DC;}h3.subtitle {font-style: normal;color: #6CA0DC;}h4 {font-style: normal;font-weight: 400;font-family: 'Source Sans Pro', sans-serif;margin-top: 1.5rem;margin-bottom: 0;line-height: 1;}h4.author,h4.date {font-family: 'Source Sans Pro', sans-serif;font-weight: 300;}.numeral {font-family: "Source Sans Pro";font-weight: 300;}em {font-style: italic;font-weight: 300;font-family: "Source Sans Pro";}strong {font-style: bold;font-weight: 600;font-family: "Source Sans Pro";}@media screen and (max-width: 760px) {pre {width: 100%;font-size: 16px;}}code {font-family: 'Source Code Pro', Consolas, "Liberation Mono", Menlo, Courier, monospace;font-size: 15px;line-height: 1.6;}pre code {font-size: 15px;}.marginnote code,.sidenote code {font-size: 1rem;}pre {width: 100%;font-size: 16px;overflow-x: auto;}pro {font-style: normal;color: #FFA500;}con {font-style: normal;color: #00008B;}ol {padding-left: 0;}ol>li {position: relative;list-style: none;width: 90%;padding-top: 10px;padding-bottom: 10px;padding-right: 0;padding-left: 90px;}ol>li:before {content: "Exercise " counter(li)".";counter-increment: li;position: absolute;color: #6CA0DC;left: -0.5px;font-weight: bold;}ol ol {counter-reset: subitem;}</style>




</head>

<body>




<h1 class="title toc-ignore">Lab 03 - La Quinta is Spanish for next to
Denny’s, Pt. 1</h1>
<h3 class="subtitle">Visualizing spatial data</h3>
<h4 class="author">Tanzy Love, based on the course by Andrew
McDavid</h4>
<h4 class="date">(updated: 2022-09-26 by TL)</h4>



<p>Have you ever taken a road trip in the US and thought to yourself “I
wonder what La Quinta means”. Well, the late comedian <a href="https://en.wikipedia.org/wiki/Mitch_Hedberg">Mitch Hedberg</a>
thinks it’s Spanish for <em>next to Denny’s</em>.</p>
<p>If you’re not familiar with these two establishments, <a href="https://www.dennys.com/">Denny’s</a> is a casual diner chain that
is open 24 hours and <a href="http://www.lq.com/">La Quinta Inn and
Suites</a> is a hotel chain.</p>
<p>These two establishments tend to be clustered together, or at least
this observation is a joke made famous by Mitch Hedberg. In this lab we
explore the validity of this joke and along the way learn some more data
wrangling and tips for visualizing spatial data.</p>
<div id="learning-goals" class="section level1">
<h1>Learning goals</h1>
<ul>
<li>Visualising spatial data</li>
<li>Joining data frames</li>
</ul>
</div>
<div id="getting-started" class="section level1">
<h1>Getting started</h1>
<p>Find your homework repo link, clone it in RStudio and open the R
Markdown document. Knit the document to make sure it compiles without
errors, it should be largely empty to start.</p>
<div id="warm-up" class="section level2">
<h2>Warm up</h2>
<p>Before we introduce the data, let’s warm up with some simple
exercises.</p>
<ul>
<li>Update the YAML, changing the author name to your name, and
<strong>knit</strong> the document. 🧶</li>
<li>Commit your changes with a meaningful commit message. ✅</li>
<li>Push your changes to GitHub. ⬆️</li>
<li>Go to your repo on GitHub and confirm that your changes are visible
in your Rmd <strong>and</strong> md files. If anything is missing,
commit and push again.</li>
</ul>
</div>
<div id="team-work" class="section level2">
<h2>Team work</h2>
<p>We have an opportunity here for dividing tasks. For example,
exercises 1 and 2 are on two different datasets, so two different people
can work on them at the same time. Be sure to <strong>pull then
push</strong> often, you don’t need to knit every time. Resolve
conflicts often to keep them small. If you work on different lines, the
GIT should be able to put them together. Look at the final .md file.
<strong>That</strong> is what will be graded.</p>
</div>
<div id="packages" class="section level2">
<h2>Packages</h2>
<p>We’ll use the <strong>tidyverse</strong> package for much of the data
wrangling and visualisation and the data lives in the
<strong>dsbox</strong> package. Install these packages if they are not
already there.</p>
<pre><code>install.packages(&quot;dsbox&quot;)</code></pre>
<p>You can load them by running the following. If you’re also running
code in real time, you need to load them in your Console:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dsbox) </span></code></pre></div>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>The datasets we’ll use are called <code>dennys</code> and
<code>laquinta</code> from the <strong>dsbox</strong> package. Note that
these data were scraped from <a href="https://locations.dennys.com/">here</a> and <a href="https://www.lq.com/en/findandbook/hotel-listings.html">here</a>,
respectively.</p>
<p>The datasets we’ll use are called <code>dennys</code> and
<code>laquinta</code> from the <strong>dsbox</strong> package. Since the
datasets are distributed with the package, we don’t need to load them
separately; they become available to us when we load the package. You
can find out more about the datasets by inspecting their documentation,
which you can access by running <code>?dennys</code> and
<code>?laquinta</code> in the Console or using the Help menu in RStudio
to search for <code>dennys</code> or <code>laquinta</code>. You can also
find this information <a href="https://rstudio-education.github.io/dsbox/reference/dennys.html">here</a>
and <a href="https://rstudio-education.github.io/dsbox/reference/laquinta.html">here</a>.</p>
<p>To help with our analysis we will also use a dataset on US states,
which is located in your repository’s <code>data</code> folder.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/states.csv&quot;</span>)</span></code></pre></div>
<p>Each observation in this dataset represents a state, including DC.
Along with the name of the state we have the two-letter abbreviation and
we have the geographic area of the state (in square miles).</p>
</div>
</div>
<div id="exercises" class="section level1">
<h1>Exercises</h1>
<ol style="list-style-type: decimal">
<li><p>What are the dimensions of the Denny’s dataset? (Hint: Use inline
R code and functions like <code>nrow</code> and <code>ncol</code> to
compose your answer.) What does each row in the dataset represent? What
are the variables?</p></li>
<li><p>What are the dimensions of the La Quinta’s dataset? What does
each row in the dataset represent? What are the variables?</p></li>
</ol>
<p>🧶 ✅ ⬆️ Knit, <em>commit, and push your changes to GitHub with an
appropriate commit message. Make sure to commit and push all changed
files so that your Git pane is cleared up afterwards.</em></p>
<p>We would like to limit our analysis to Denny’s and La Quinta
locations in the United States.</p>
<ol start="3" style="list-style-type: decimal">
<li><p>Take a look at the websites that the data come from (linked
above). Are there any La Quinta’s locations outside of the US? If so,
which countries? What about Denny’s?</p></li>
<li><p>Now take a look at the data. What would be some ways of
determining whether or not either establishment has any locations
outside the US using just the data (and not the websites). Don’t worry
about whether you know how to implement this, just brainstorm some
ideas. Write down at least one as your answer, but you’re welcomed to
write down a few options too.</p></li>
</ol>
<p>We will determine whether or not the establishment has a location
outside the US using the <code>state</code> variable in the
<code>dn</code> and <code>lq</code> datasets. We know exactly which
states are in the US, and we have this information in the
<code>states</code> dataframe we loaded.</p>
<ol start="5" style="list-style-type: decimal">
<li>Find the Denny’s locations that are outside the US, if any. To do
so, filter the Denny’s locations for observations where
<code>state</code> is not in <code>states$abbreviation</code>. The code
for this is given below. Note that the <code>%in%</code> operator
matches the states listed in the <code>state</code> variable to those
listed in <code>states$abbreviation</code>. The <code>!</code> operator
means <strong>not</strong>. Are there any Denny’s locations outside the
US?</li>
</ol>
<p><label for="tufte-mn-1" class="margin-toggle">⊕</label><input type="checkbox" id="tufte-mn-1" class="margin-toggle"><span class="marginnote"><span style="display: block;">“Filter for
<code>state</code>s that are not in
<code>states$abbreviation</code>.”</span></span></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dn <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(state <span class="sc">%in%</span> states<span class="sc">$</span>abbreviation))</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>Add a country variable to the Denny’s dataset and set all
observations equal to <code>&quot;United States&quot;</code>. Remember, you can
use the <code>mutate</code> function for adding a variable. Make sure to
save the result of this as <code>dn</code> again so that the stored data
frame contains the new variable going forward.</li>
</ol>
<p><label for="tufte-mn-2" class="margin-toggle">⊕</label><input type="checkbox" id="tufte-mn-2" class="margin-toggle"><span class="marginnote"><span style="display: block;">We don’t need to tell R
how many times to repeat the character string “United States” to fill in
the data for all observations, R takes care of that
automatically.</span></span></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>dn <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="st">&quot;United States&quot;</span>)</span></code></pre></div>
<ol start="7" style="list-style-type: decimal">
<li><p>Find the La Quinta locations that are outside the US, and figure
out which country they are in. This might require some googling. Take
notes, you will need to use this information in the next
exercise.</p></li>
<li><p>Add a country variable to the La Quinta dataset. Use the
<code>case_when</code> function to populate this variable. You’ll need
to refer to your notes from Exercise 7 about which country the non-US
locations are in. Here is some starter code to get you going:</p></li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>lq <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">case_when</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    state <span class="sc">%in%</span> state.abb     <span class="sc">~</span> <span class="st">&quot;United States&quot;</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;ON&quot;</span>, <span class="st">&quot;BC&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Canada&quot;</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    state <span class="sc">==</span> <span class="st">&quot;ANT&quot;</span>           <span class="sc">~</span> <span class="st">&quot;Colombia&quot;</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    ...                      <span class="co"># fill in the rest</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  ))</span></code></pre></div>
<p>🧶 ✅ ⬆️ Knit, <em>commit, and push your changes to GitHub with an
appropriate commit message. Make sure to commit and push all changed
files so that your Git pane is cleared up afterwards.</em></p>
<p>Going forward we will work with the data from the United States only.
All Denny’s locations are in the United States, so we don’t need to
worry about them. However we do need to filter the La Quinta dataset for
locations in United States.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>lq <span class="ot">&lt;-</span> lq <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;United States&quot;</span>)</span></code></pre></div>
<ol start="9" style="list-style-type: decimal">
<li>Which states have the most and fewest Denny’s locations? What about
La Quinta? Is this surprising? Why or why not?</li>
</ol>
<p>Next, let’s calculate which states have the most Denny’s locations
<em>per thousand square miles</em>. This requires <em>joinining</em>
information from the frequency tables you created in Exercise 8 with
information from the <code>states</code> data frame.</p>
<p>First, we count how many observations are in each state, which will
give us a data frame with two variables: <code>state</code> and
<code>n</code>. Then, we join this data frame with the
<code>states</code> data frame. However note that the variables in the
<code>states</code> data frame that has the two-letter abbreviations is
called <code>abbreviation</code>. So when we’re joining the two data
frames we specify that the <code>state</code> variable from the Denny’s
data should be matched <code>by</code> the <code>abbreviation</code>
variable from the <code>states</code> data:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dn <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(states, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;state&quot;</span> <span class="ot">=</span> <span class="st">&quot;abbreviation&quot;</span>))</span></code></pre></div>
<p>Before you move on the the next question, run the code above and take
a look at the output. In the next exercise you will need to build on
this pipe.</p>
<ol start="10" style="list-style-type: decimal">
<li>Which states have the most Denny’s locations per thousand square
miles? What about La Quinta?</li>
</ol>
<p>Next, we put the two datasets together into a single data frame.
However before we do so, we need to add an identifier variable. We’ll
call this <code>establishment</code> and set the value to
<code>&quot;Denny&#39;s&quot;</code> and <code>&quot;La Quinta&quot;</code> for the
<code>dn</code> and <code>lq</code> data frames, respectively.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dn <span class="ot">&lt;-</span> dn <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">establishment =</span> <span class="st">&quot;Denny&#39;s&quot;</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>lq <span class="ot">&lt;-</span> lq <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">establishment =</span> <span class="st">&quot;La Quinta&quot;</span>)</span></code></pre></div>
<p>Since the two data frames have the same columns, we can easily bind
them with the <code>bind_rows</code> function:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dn_lq <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dn, lq)</span></code></pre></div>
<p>We can plot the locations of the two establishments using a scatter
plot, and color the points by the establishment type. Note that the
latitude is plotted on the x-axis and the longitude on the y-axis.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dn_lq, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> longitude, <span class="at">y =</span> latitude, <span class="at">color =</span> establishment)) <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p>The following two questions ask you to create visualizations. These
should follow best practices you learned in class, such as informative
titles, axis labels, etc. See <a href="http://ggplot2.tidyverse.org/reference/labs.html" class="uri">http://ggplot2.tidyverse.org/reference/labs.html</a> for
help with the syntax. You can also choose different themes to change the
overall look of your plots, see <a href="http://ggplot2.tidyverse.org/reference/ggtheme.html" class="uri">http://ggplot2.tidyverse.org/reference/ggtheme.html</a> for
help with these.</p>
<ol start="11" style="list-style-type: decimal">
<li><p>Filter the data for observations in New Jersey only, and recreate
the plot. You should also adjust the transparency of the points, by
setting the <code>alpha</code> level, so that it’s easier to see the
overplotted ones. Visually, does Mitch Hedberg’s joke appear to hold
here?</p></li>
<li><p>Now filter the data for observations in Texas only, and recreate
the plot, with an appropriate <code>alpha</code> level. Visually, does
Mitch Hedberg’s joke appear to hold here?</p></li>
</ol>
<p>That’s it for now! In the next lab we will take a more quantitative
approach to answering these questions.</p>
<p>🧶 ✅ ⬆️ Knit, <em>commit, and push your changes to GitHub with an
appropriate commit message. Make sure to commit and push all changed
files so that your Git pane is cleared up afterwards and review the md
document on GitHub to make sure you’re happy with the final state of
your work.</em></p>
<div id="appendix" class="section level2">
<h2>Appendix</h2>
<p>The inspiration for this lab comes from a blog post by John Reiser on
his <em>new jersey geographer</em> blog. You can read that analysis <a href="http://njgeo.org/2014/01/30/mitch-hedberg-and-gis/">here</a>.
Reiser’s blog post focuses on scraping data from Denny’s and La Quinta
Inn and Suites websites using Python. In this lab we focus on
visualization and analysis of these data. However note that the data
scraping was also done in R, and we we will discuss web scraping using R
later in the course. But for now we focus on the data that has already
been scraped and tidied for you.</p>
</div>
<div id="rubric" class="section level2">
<h2>Rubric</h2>
<p>29 points: - 2 points per exercise for correctness of code and
adequate prose answers/description (where specified) - 5 points for
adequately commented commits</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
